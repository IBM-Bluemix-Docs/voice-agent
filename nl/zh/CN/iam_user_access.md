---

copyright:

  years: 2019

lastupdated: "2019-06-06"
subcollection: "voice-agent"

keywords: Voice Agent IAM, Voice Agent user access, get started with IAM, IAM tutorial, IAM quick start, user access, SMS IAM, SMS user access

---

{:shortdesc: .shortdesc}
{:codeblock: .codeblock}
{:screen: .screen}
{:new_window: target="_blank"}
{:tip: .tip}
{:note: .note}

# 配置 IAM 和用户访问权
{: #iam}

本教程旨在通过邀请用户加入帐号，并向那些用户分配对 {{site.data.keyword.iva_short}} 实例的 Cloud IAM 访问权，帮助您快速入门并熟练运用 IBM Cloud Identity and Access Management (IAM)。
{:shortdesc}

## 开始之前
{: #iam-before-you-begin}

如果您初次使用 IAM，请查看以下文档以深入了解访问管理系统的功能、概念和组件。

* [IBM Cloud Identity and Access Management](/docs/iam?topic=iam-iamoverview) 概要介绍了 IBM 中的 IAM 是什么、可用功能以及到可用 CLI 和 API 文档的链接。
* [IAM 概念](/docs/iam?topic=iam-iamconcepts)概要介绍了 IAM 中的高级别概念，可帮助您在入门阶段了解不同的组件。
* [IAM 访问权](/docs/iam?topic=iam-userroles)更深入介绍了访问管理如何使用访问策略执行任务。

本指南涵盖用于对用户添加和分配访问权的最常见情况。用户访问权和角色有很多其他选项和配置。先前的链接提供了更多详细信息。 

## 步骤 1. 邀请用户并分配初始访问权
{: #step1}

可以邀请一个或多个用户并在邀请时为这些用户设置初始访问策略。如果在一个邀请中邀请多个用户，那么会为每个用户分配相同的访问权。在**邀请用户**页面的**访问权**部分中，只能看到您有权分配的用户角色。

帐户所有者可以在**服务**部分中为邀请的用户分配 Cloud IAM 角色。作为帐户所有者，您可以提供对以下项的访问权：
* 资源组中的所有资源
* 资源组中特定服务的所有资源 
* 帐户中所有启用“身份和访问权”的服务
* 帐户中的单个资源
* 对帐户管理服务的访问权

使用以下过程，为帐户中的用户分配 Cloud IAM 角色。

1. 转至**管理** &gt; **访问权 (IAM)**，然后选择**用户**。
2. 单击**邀请用户**。
3. 指定要邀请的用户的电子邮件地址。
4. 在**访问权**部分中，展开**服务**选项。
5. 选择分配对**资源**、**资源组**中的资源或者**帐户管理服务**的访问权。
6. 根据您的选择，遵循提示来指定所需的访问权。如果选择了_资源组_选项，那么还可以通过选择对资源组的访问角色，为用户提供对资源组的查看、编辑或管理访问权。
7. 在**服务**输入框中，从下拉菜单中选择 *{{site.data.keyword.iva_short}}* 或在框中进行输入，然后按 Enter 键。 
8. 选择相应的**区域**和**服务实例**。
9. 在**选择角色**部分下，从*管理者*、*写入者*和*读取者*中进行选择。如果您的 {{site.data.keyword.iva_short}} *服务实例*使用的是 SMS，那么您**必须**选择*写入者*或*管理者*角色，还有您希望授予的任何其他角色。
    - 有关**角色**的更多信息，请参阅[服务访问角色](/docs/iam?topic=iam-userroles#service_access_roles)。
10. 如果您具有相应许可权，还可以在邀请时分配 Cloud Foundry 或基础架构访问权。
11. 单击**邀请用户**。

有关更多信息，请参阅[邀请用户和分配访问权](/docs/iam?topic=iam-iamuserinv#iamuserinv)。

## 步骤 2. 创建访问组
{: #step2}

要简化为帐户中的用户分配访问权的过程，可以创建访问组。访问组是一种组织用户和服务标识的方法，您可以通过为整个组定义单个策略来方便地为用户和服务标识分配访问权。

### 设置组
{: #group_setup}

要创建访问组，请完成以下步骤。

1. 在菜单栏中，单击**管理** &gt; **访问权 (IAM)**，然后选择**访问组**。
2. 单击**创建**。
3. 输入组名。还可以添加说明。
4. 单击**创建**。

接下来，通过添加用户或服务标识继续进行设置。

1. 您将进入新创建的访问组页面。此组也将在**访问组**页面上显示在菜单栏的_组_列表中。
2. 单击**添加用户**。
3. 从列表中选择要添加的用户，然后单击**添加到组**。
4. 要将服务标识添加到组，请单击**服务标识**。
5. 从列表中选择要添加的标识，然后单击**添加到组**。

### 为组分配访问权
{: #group_access}

创建组后，可以使用单个策略或多个策略为组中的所有实体分配访问权。

1. 在菜单栏中，单击**管理** &gt; **访问权 (IAM)**，然后选择**访问组**。
2. 选择要为其分配访问权的组。
3. 在**访问策略**选项卡中，单击**分配访问权**以设置访问策略。根据需要重复以分配更多访问权。

通过将用户组织成访问组，您可以向一组用户分配对单个策略的访问权，从而减少需要管理的策略总数。
{: tip}


## 步骤 3. 管理现有用户的访问权
{: #user_access_manage}

以下部分详细说明了如何管理和编辑您已在帐户中设置的用户和组的访问权。

### 分配新访问权
{: #new_access}

要分配新的访问策略，请完成以下步骤：

1. 在菜单栏中，单击**管理** &gt; **访问权 (IAM)**，然后选择**用户**。
2. 选择要为其分配访问权的用户的名称。
3. 单击**访问策略**。
4. 单击**分配访问权**。
5. 选择要如何分配访问权：
    * 选择**在资源组中分配访问权**，以分配对组中所有资源的访问权，或者对为组内特定服务指定的资源的访问权。您还可以授予用户对资源组的查看、编辑或管理访问权，方法是针对资源组为用户分配用户角色。如果想要授予用户仅对指定资源而非资源组有访问权，请选择**无访问权**。
    * 选择**分配对资源的访问权**可分配对帐户中所有启用“身份和访问权”的资源的访问权、对帐户中特定服务的所有资源的访问权、对单个实例的访问权或对特定服务实例中单个资源的访问权。
    * 选择**分配对帐户管理服务的访问权**，以分配对所有帐户管理服务或仅一个帐户管理服务的访问权。
5. 选择任意角色组合来定义访问权的作用域。有关更多信息，请参阅 [Cloud IAM 角色](/docs/iam?topic=iam-userroles#iamusermanrol)。
6. 单击**分配**。


### 编辑现有访问权
{: #editing_access}

可以通过编辑用户的已分配角色来更新现有访问权。

1. 在菜单栏中，单击**管理** &gt; **访问权 (IAM)**，然后选择**用户**。
2. 选择要编辑其访问权的用户的名称。
3. 单击**访问策略**。
4. 在要编辑的策略所在行上的**操作** ![“操作列表”图标](../icons/action-menu-icon.svg) 菜单中，单击**编辑**。
4. 通过更新分配的角色来编辑策略。
5. 单击**保存**。

可以通过在要除去的策略的**操作** ![“操作列表”图标](../icons/action-menu-icon.svg) 菜单中单击**除去**选项，以除去用户的访问权。

## 步骤 4. 分配对 SMS 或语音 + SMS 代理程序的访问权（可选）
{: #sms_access}

如果为其分配访问权的代理程序是 **SMS** 或**语音 + SMS** 代理程序，请创建*新凭证*。

### 创建新凭证
{: #new_cred}

仅为帐户中已处于活动状态的角色创建凭证。对于 SMS 和语音 + SMS 代理程序，您必须已分配*写入者*或*管理者*角色。请参阅[步骤 9 的邀请用户并分配初始访问权](/docs/services/voice-agent?topic=voice-agent-iam#step1)。

1. 在 {{site.data.keyword.iva_short}} 实例的*仪表板*上，单击**新建凭证 (+)**。 
2. 在弹出的新对话框中，输入**名称**，并在**角色**下拉菜单下，选择*写入者*或*管理者*。 
    - **注：**对于任何与 SMS 相关的功能，您**_必须_**选择*写入者*或*管理者*角色。 
3. 单击**添加**按钮。

## 故障诊断
{: #troubleshoot}

如果尝试创建*新凭证*时，您在**服务凭证**页面上看到的错误信息如下所示：
> 您没有分配“写入者”角色的必需许可权。请联系帐户所有者更新您的访问权。

那么，您必须遵循指示信息来为您自己分配*写入者*或*管理者*访问权，这对与 SMS 相关的功能来说是**必需**权限。请参阅[步骤 9 的分配访问权](/docs/services/voice-agent?topic=voice-agent-iam#step1)，然后继续[创建新凭证](/docs/services/voice-agent?topic=voice-agent-iam#new_cred)。

## 后续步骤
{: #next}

通过查看 [Cloud IAM 功能](/docs/iam?topic=iam-iamoverview#features)列表了解有关 Cloud IAM 可以执行的操作的更多信息。
